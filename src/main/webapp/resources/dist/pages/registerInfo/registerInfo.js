define(["require","../../common/js/baseUrl/baseUrl"],function(e){var t=e("../../common/js/baseUrl/baseUrl");return function(e){e.controller("registerInfoControl",["$scope","$http","$state","cache",function(e,n,r,i){var s=["@qq.com","@163.com","@126.com","@139.com","@sina.com","@hotmail.com","@aliyun.com","@sohu.com"];e.params={},e.isShowSuffix=!1,e.emailList=s,e.isEmail=!0,e.addSuffix=function(t){e.params.email+=t,e.isShowSuffix=!1,e.isEmail=!0},e.testSuffix=function(t){if(!t){e.isShowSuffix=!1;return}var n=(t||"").indexOf("@");if(n==-1)e.emailList=s,e.isShowSuffix=!0;else{var r=[],i=new RegExp("^"+t.substring(n,t.length));s.forEach(function(e){i.test(e)&&r.push(e.replace(i,""))}),e.emailList=r,e.isShowSuffix=!!r.length}},e.submit=function(){if(!/^[^\s@]+@[^\s@]+\.\S+$/.test(e.params.email)){e.isEmail=!1;return}n({url:t+"customer/saveOrUpdateCustomerPersonal",method:"post",data:e.params}).success(function(e){if(e.success){if(e.data.account){i.set("account",e.data.account),r.go("login");return}r.go("registed")}else alert(e.msg)})}}])}});
